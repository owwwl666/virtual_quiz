# Описание

Реализация игры "Викторина" с помощью ботов на двух платформах - ВК и телеграм. Интерфейс ботов очень прост: при запуске бота, выскакивает меню, состоящее из 3 кнопок - "Новый вопрос", "Сдаться", "Мой счёт".

Принцип работы после запуска бота (для того, чтобы запустить каждого из ботов, читайте инструкции в разделах `tg_bot.py` и `vk_bot.py`):

- Нажать на кнопку "Новый вопрос";
- Если знаете ответ на вопрос, то укажите его с маленькой буквы. Бот проверит ответ, если он верен, то попросит выбрать кнопку "Новый вопрос", в противном случае, сообщит о неправильности и предложит ввести ответ еще раз;
- Если не знаете, то нажмите кнопку "Сдаться" и бот сообщит вам ответ;
- Кнопка "Мой счёт" - количество правильно данных ответов на вопросы пользователем в текущей игре.

Ознакомиться с работой ботов можно, перейдя по следующим ссылкам:

- [ВК](https://vk.com/club224264443)
- [Телеграм](https://t.me/very_good_quiz_bot)

# Запуск проекта локально

## Установка зависимостей

Создайте виртуальное окружение и установите необходимые пакеты для работы скриптов, выполнив следующую команду:

```sh
pip install -r requirements.txt
```

## Установка Redis

Для того, чтобы установить redis на необходимую операционную систему, ознакомьтесь с инструкцией:

[Установка и настройка Redis для разных ОС](https://timeweb.cloud/tutorials/redis/ustanovka-i-nastrojka-redis-dlya-raznyh-os)

## Переменные окружения

Создайте файл `.env` и поместите в него переменные окружения.

**Обязательные переменные окружения**:

```
TELEGRAM_BOT_TOKEN - <токен телеграм бота для викторины>
LOGGER_BOT_TOKEN - <токен телеграм бота для логирования ошибок>
CHAT_ID - <ваш chat_id из телеграм>
VK_BOT_TOKEN - <токен VK бота для викторины>
```

Необязательные(с дефолтными значениями) переменные окружения:

```
HOST - <ip сервера, на котором хранятся БД с данными>
PORT - <порт для соединения с БД>
QUESTIONS_DB - <БД с вопросами для викторины>
QUESTIONS_DB_PASSWORD - <пароль от БД с вопросами>
USERS_DB - <БД с пользователями>
USERS_DB_PASSWORD - <пароль от БД с пользователями>
POINTS_DB - <БД с количеством очков для каждого пользователя>
POINTS_DB_PASSWORD - <пароль от БД с баллами>
```

## adding_questions.py

Скрипт для редактирования файла с вопросами и ответами для Викторины. Открывает переданный файл с данными о Викторине, редактирует их под необходимый формат и сохраняет в БД `questions_redis` в виде словаря `{'вопрос':'ответ'}` либо добавляет новые вопросы к уже имеющимся.

Для того, чтобы добавить новые вопросы, необходимо запустить скрипт и передать ему в виде аргумента путь к файлу с вопросами:

```sh
python adding_questions.py $PATH
```

[Архив](https://dvmn.org/media/modules_dist/quiz-questions.zip) с вопросами.


## tg_bot.py

Телеграм бот для игры в викторину. Для запуска бота необходимо выбрать из меню (или ввести вручную) команду `/start`. Для выхода из игры - команду `/cancel`.

Запуск скрипта:

```sh
python tg_bot.py
```

## vk_bot.py

ВК бот для игры в викторину. Для начала нововй игры введите команду `Начать`.

Запуск скрипта:

```sh
python vk_bot.py
```


# Результаты

Пример результата для Telegram:

![](https://dvmn.org/filer/canonical/1569215494/324/)

Пример результата для Вконтакте:

![](https://dvmn.org/filer/canonical/1569215498/325/)
